<div class="item">
  <div class="product">
    <span class="title">{{item.name}}</span>
    <div class="d-flex flex-row">
      <div class="image">
        <div *ngIf="item.notes" class="hasNotes" (mouseover)="toggleNotes($event)" (mouseout)="toggleNotes($event)">!</div>
        <div *ngIf="showNotes" class="notes"><span>{{item.notes}}</span></div>
        <img [src]="getImagePath()" />
      </div>
      <span class="pricing">{{formatCurrency(item.price)}}</span>
    </div>
  </div>
  <div class="sales">
    <div class="details">
      <div>
        <span>QTY Avail.</span>
        <div class="input no-border">
          <span>{{ qtyAvail }}</span>
        </div>
      </div>
      <div>
        <span>Count In</span>
        <div class="input">
          <input type="text" id="txtCountInd" [(ngModel)]="count.countIn" (blur)="updateTotals()" [disabled]="settled"/>
        </div>
        <div class="position-relative w-100">
          <button class="btn" (click)="togglePopover()">More</button>
          <div [ngClass]="{'hide': !showPopover}" class="popover">
            <div class="d-flex flex-column">
              <span class="w-100">Update price:</span>
              <input type="text" id="txtPrice" class="px-1" [(ngModel)]="item.price" (blur)="updateTotals()" [disabled]="settled" />
            </div>
            <div class="d-flex flex-column">
              <span class="w-100">Notes:</span>
              <textarea id="txtNotes" [(ngModel)]="item.notes" maxlength="200" [disabled]="settled"></textarea>
            </div>
          </div>
        </div>
      </div>
      <div>
        <span>Add</span>
        <div class="input green">
          <input type="text" id="txtAdd" [(ngModel)]="count.add" (blur)="updateTotals()" [disabled]="settled" />
        </div>
      </div>
      <div>
        <span>Total In</span>
        <div class="input blue">
          <span>{{ totalIn }}</span>
        </div>
        <div class="input blue no-border">
          <span>{{ totalIn }}</span>
        </div>
      </div>
      <div>
        <span>Comp</span>
        <div class="input red">
          <input type="text" id="txtComp" [(ngModel)]="count.comp" (blur)="updateTotals()" [disabled]="settled" />
        </div>
        <div class="input red no-border">
          <span>{{ count.comp }}</span>
        </div>
      </div>
      <div>
        <span>Count Out</span>
        <div class="input">
          <input type="text" id="txtCountOut" [(ngModel)]="count.countOut" (blur)="updateTotals()" [disabled]="settled" />
        </div>
        <div class="input no-border">
          <span>{{ count.countOut }}</span>
        </div>
      </div>
      <div>
        <span>Total Sold</span>
        <div class="input blue">
          <span>{{ totalSold }}</span>
        </div>
        <div class="input blue no-border position-relative">
          <div class="donut-chart" [ngStyle]="{'animation-delay': getPercent()}">
            <span>{{ totalSold }}</span>
          </div>
        </div>
      </div>
      <div>
        <span>Gross</span>
        <div class="input blue">
          <span>{{ gross }}</span>
        </div>
        <div class="input blue no-border">
          <span>{{formatCurrency(gross)}}</span>
        </div>
      </div>
    </div>
  </div>
</div>
